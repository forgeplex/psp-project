# PSP ç³»ç»ŸåŠŸèƒ½æ¨¡å—æ¸…å•

> ğŸ“… ç”Ÿæˆæ—¶é—´ï¼š2026-02-03
> ğŸ” åˆ†ææ¥æºï¼š`forgeplex/psp` åç«¯ä»£ç 

---

## æ¦‚è¿°

PSP (Payment Service Platform) æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ”¯ä»˜æœåŠ¡å¹³å°ï¼ŒåŒ…å« **32+ ä¸ªæ ¸å¿ƒåŠŸèƒ½æ¨¡å—**ï¼ŒæŒ‰é¢†åŸŸåˆ’åˆ†ä¸º 6 å¤§æ¿å—ã€‚

---

## æ¨¡å—æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           æ¥å…¥å±‚ (Interfaces)                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Admin API   â”‚Checkout API â”‚Gateway API  â”‚Merchant API â”‚Agent API            â”‚
â”‚ ç®¡ç†åå°     â”‚ æ”¶é“¶å°       â”‚ æ”¯ä»˜ç½‘å…³     â”‚ å•†æˆ·é—¨æˆ·     â”‚ ä»£ç†æ¥å£             â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚             â”‚             â”‚             â”‚                 â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              æ ¸å¿ƒä¸šåŠ¡å±‚                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ›’ äº¤æ˜“æ”¯ä»˜     â”‚   ğŸª å•†æˆ·ç®¡ç†      â”‚   ğŸ’° èµ„é‡‘è´¦åŠ¡      â”‚   ğŸ›¡ï¸ é£æ§åˆè§„     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Transaction   â”‚ â€¢ Merchant        â”‚ â€¢ Ledger          â”‚ â€¢ Risk           â”‚
â”‚ â€¢ Payment       â”‚ â€¢ KYB             â”‚ â€¢ Treasury        â”‚ â€¢ AML            â”‚
â”‚ â€¢ Channel       â”‚ â€¢ Tenant          â”‚ â€¢ Settlement      â”‚ â€¢ Compliance     â”‚
â”‚ â€¢ Checkout      â”‚ â€¢ RBAC            â”‚ â€¢ Recon           â”‚ â€¢ Tokenization   â”‚
â”‚                 â”‚                   â”‚                   â”‚                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              è¿è¥æ”¯æ’‘å±‚                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Ops (è¿è¥)     â”‚ â€¢ Webhook         â”‚ â€¢ Audit (å®¡è®¡)    â”‚ â€¢ Notification   â”‚
â”‚ â€¢ Admin (åå°)   â”‚ â€¢ Report (æŠ¥è¡¨)   â”‚ â€¢ Monitor (ç›‘æ§)  â”‚ â€¢ Email          â”‚
â”‚ â€¢ Scheduler      â”‚ â€¢ Analytics       â”‚ â€¢ Alerting (å‘Šè­¦) â”‚ â€¢ Telegram       â”‚
â”‚ â€¢ I18n (å›½é™…åŒ–)  â”‚                   â”‚                   â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           åŸºç¡€è®¾æ–½å±‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Outbox Relay  â”‚ â€¢ Temporal Worker â”‚ â€¢ Workers         â”‚ â€¢ Sandbox        â”‚
â”‚ â€¢ MCP Server    â”‚ â€¢ Keycloak Sync   â”‚ â€¢ Payout Worker   â”‚ â€¢ Recon Worker   â”‚
â”‚                 â”‚ â€¢ Settlement      â”‚ â€¢ Webhook Worker  â”‚ â€¢ Export Worker  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸€ã€äº¤æ˜“æ”¯ä»˜åŸŸ (Core Payment)

### 1. Transaction - äº¤æ˜“æ ¸å¿ƒ â­P0
**è·¯å¾„**: `internal/transaction/`
**åŠŸèƒ½**: 
- äº¤æ˜“è®°å½•ç®¡ç† (CRUD)
- äº¤æ˜“çŠ¶æ€æœº (pending â†’ processing â†’ completed/failed)
- äº¤æ˜“æœç´¢ä¸æŸ¥è¯¢
- æ‰¹é‡é€€æ¬¾å¤„ç†
- äº¤æ˜“ç»Ÿè®¡åˆ†æ

**ä¾èµ–**: Channel, Payment, Merchant, Ledger

### 2. Payment - æ”¯ä»˜å¤„ç† â­P0
**è·¯å¾„**: `internal/payment/`
**åŠŸèƒ½**:
- æ”¯ä»˜æ ¸å¿ƒæµç¨‹
- ä¿¡ç”¨å¡æ”¯ä»˜å¤„ç†
- æ”¯ä»˜å‡­è¯ (Receipt) ç®¡ç†
- æ”¯ä»˜çŠ¶æ€åŒæ­¥

**ä¾èµ–**: Channel, Risk, Ledger

### 3. Channel - æ”¯ä»˜æ¸ é“ â­P0
**è·¯å¾„**: `internal/channel/`
**åŠŸèƒ½**:
- æ”¯ä»˜æ¸ é“é…ç½®ç®¡ç†
- æ™ºèƒ½è·¯ç”±å¼•æ“ (åŸºäºæˆåŠŸç‡/è´¹ç‡/ä¼˜å…ˆçº§)
- ç†”æ–­å™¨ä¸å¥åº·æ£€æŸ¥
- æ¸ é“é™é¢æ§åˆ¶
- **å·²é›†æˆé€‚é…å™¨**:
  - Bradesco (å·´è¥¿é“¶è¡Œ)
  - Sitobank (æ–°åŠ å¡)
  - Oscar (è²å¾‹å®¾)
  - Stripe (å›½é™…å¡)
  - STP (å¢¨è¥¿å“¥)
  - NPCI/UPI (å°åº¦)
  - å„ç±» Mock/Sandbox é€‚é…å™¨

**ä¾èµ–**: Merchant, Treasury

### 4. Checkout - æ”¶é“¶å° â­P0
**è·¯å¾„**: `internal/checkout/`, `internal/interfaces/checkout/`
**åŠŸèƒ½**:
- æ”¯ä»˜é¡µé¢æ‰˜ç®¡
- è®¢å•ç¡®è®¤æµç¨‹
- æ”¯ä»˜æ–¹å¼é€‰æ‹©
- 3DS éªŒè¯é›†æˆ

**ä¾èµ–**: Payment, Channel, Merchant

---

## äºŒã€å•†æˆ·ç®¡ç†åŸŸ (Merchant Management)

### 5. Merchant - å•†æˆ·ç®¡ç† â­P0
**è·¯å¾„**: `internal/merchant/`
**åŠŸèƒ½**:
- å•†æˆ· CRUD
- å•†æˆ·é…ç½®ç®¡ç†
- å•†æˆ· Dashboard/æ¦‚è§ˆ
- å•†æˆ·å¯¼å‡º/æŠ¥è¡¨
- å•†æˆ·å¯†é’¥ç®¡ç†
- å•†æˆ·é£é™©è¯„åˆ†

**ä¾èµ–**: Tenant, KYB

### 6. KYB - ä¼ä¸šå®åè®¤è¯ â­P1
**è·¯å¾„**: `internal/kyb/`
**åŠŸèƒ½**:
- ä¼ä¸šèº«ä»½éªŒè¯
- KYB è§„åˆ™å¼•æ“
- å•†æˆ·èµ„è´¨å®¡æ ¸

**ä¾èµ–**: Merchant, Compliance

### 7. Tenant - å¤šç§Ÿæˆ·ç®¡ç† â­P1
**è·¯å¾„**: `internal/tenant/`
**åŠŸèƒ½**:
- ç§Ÿæˆ·éš”ç¦»
- ç§Ÿæˆ·é…ç½®
- ç®¡ç†å‘˜è®¤è¯ (Admin Auth)
- å—ä¿¡ä»»è®¾å¤‡ç®¡ç†
- MFA å¤šå› ç´ è®¤è¯

**ä¾èµ–**: Keycloak (å¤–éƒ¨)

### 8. RBAC - æƒé™æ§åˆ¶ â­P1
**è·¯å¾„**: å†…åµŒäº Admin/Agent API
**åŠŸèƒ½**:
- è§’è‰²ç®¡ç†
- æƒé™åˆ†é…
- èœå•æƒé™
- æŒ‰é’®çº§æƒé™

**ä¾èµ–**: Tenant, Admin

---

## ä¸‰ã€èµ„é‡‘è´¦åŠ¡åŸŸ (Finance & Ledger)

### 9. Ledger - æ€»è´¦ç³»ç»Ÿ â­P0
**è·¯å¾„**: `internal/ledger/`
**åŠŸèƒ½**:
- è´¦æˆ·ç®¡ç†
- å€Ÿè´·è®°è´¦ (Double-entry)
- ä½™é¢è®¡ç®—
- è´¦ç°¿æŸ¥è¯¢

**ä¾èµ–**: Transaction, Merchant

### 10. Treasury - è´¢èµ„ç®¡ç† â­P1
**è·¯å¾„**: `internal/treasury/`
**åŠŸèƒ½**:
- èµ„é‡‘è°ƒæ‹¨
- èµ„é‡‘æ“ä½œå®¡æ‰¹
- ä½™é¢é¢„è­¦

**ä¾èµ–**: Ledger, Settlement

### 11. Settlement - ç»“ç®—ç³»ç»Ÿ â­P1
**è·¯å¾„**: `internal/settlement/`
**åŠŸèƒ½**:
- ç»“ç®—å•ç”Ÿæˆ
- ç»“ç®—å‘¨æœŸç®¡ç†
- ç»“ç®—æŠ¥è¡¨
- ç»“ç®— Worker å¤„ç†

**ä¾èµ–**: Ledger, Recon, Merchant

### 12. Recon - å¯¹è´¦ç³»ç»Ÿ â­P1
**è·¯å¾„**: `internal/recon/`
**åŠŸèƒ½**:
- æ¸ é“å¯¹è´¦
- å·®å¼‚å¤„ç†
- å¯¹è´¦æŠ¥è¡¨
- Recon Worker è‡ªåŠ¨å¯¹è´¦

**ä¾èµ–**: Channel, Transaction

---

## å››ã€é£æ§åˆè§„åŸŸ (Risk & Compliance)

### 13. Risk - é£é™©ç®¡æ§ â­P0
**è·¯å¾„**: `internal/risk/`
**åŠŸèƒ½**:
- é£é™©è§„åˆ™å¼•æ“ (DSL å®šä¹‰)
- å®æ—¶é£é™©è¯„åˆ†
- é£æ§å†³ç­– (é€šè¿‡/æ‹’ç»/äººå·¥å®¡æ ¸)
- é£é™©è§„åˆ™ç®¡ç†
- å¤§é¢äº¤æ˜“ç›‘æ§

**ä¾èµ–**: Transaction, Merchant, Channel

### 14. AML - åæ´—é’± â­P1
**è·¯å¾„**: `internal/aml/`
**åŠŸèƒ½**:
- AML æ¡ˆä¾‹ç®¡ç†
- å¯ç–‘äº¤æ˜“ç›‘æµ‹
- åå•ç­›æŸ¥

**ä¾èµ–**: Risk, Transaction

### 15. Compliance - åˆè§„ç®¡ç† â­P2
**è·¯å¾„**: `internal/compliance/`
**åŠŸèƒ½**:
- åˆè§„ç­–ç•¥é…ç½®
- åˆè§„æŠ¥å‘Š
- ç›‘ç®¡ä¸ŠæŠ¥

**ä¾èµ–**: AML, Risk

### 16. Tokenization - ä»¤ç‰ŒåŒ– â­P1
**è·¯å¾„**: `internal/tokenization/`
**åŠŸèƒ½**:
- æ•æ„Ÿæ•°æ®è„±æ•
- å¡å·ä»¤ç‰ŒåŒ–
- å®‰å…¨å­˜å‚¨

**ä¾èµ–**: Payment

---

## äº”ã€è¿è¥æ”¯æ’‘åŸŸ (Operations)

### 17. Ops - è¿è¥æ“ä½œ â­P1
**è·¯å¾„**: `internal/ops/`
**åŠŸèƒ½**:
- é€€æ¬¾ç®¡ç† (å•ç¬”/æ‰¹é‡)
- äººå·¥å®¡æ ¸
- è°ƒå•å¤„ç†
- äº‰è®®å¤„ç† (Dispute)
- è¿è¥ Dashboard

**ä¾èµ–**: Transaction, Risk, Ledger

### 18. Admin - åå°ç®¡ç† â­P0
**è·¯å¾„**: `internal/admin/`, `internal/interfaces/admin/`
**åŠŸèƒ½**:
- ç³»ç»Ÿé…ç½®ç®¡ç†
- æ¸ é“é…ç½®
- è·¯ç”±é…ç½®
- ç³»ç»Ÿç›‘æ§
- æ•°æ®å¯¼å…¥/å¯¼å‡º

**ä¾èµ–**: æ‰€æœ‰æ¨¡å—

### 19. Webhook - å›è°ƒé€šçŸ¥ â­P1
**è·¯å¾„**: `internal/webhook/`, `internal/interfaces/channel-webhook/`
**åŠŸèƒ½**:
- Webhook é…ç½®
- äº‹ä»¶æ¨é€
- é‡è¯•æœºåˆ¶
- ç­¾åéªŒè¯
- IP ç™½åå•

**ä¾èµ–**: Transaction, Merchant

### 20. Notification - æ¶ˆæ¯é€šçŸ¥ â­P2
**è·¯å¾„**: `internal/notification/`
**åŠŸèƒ½**:
- ç«™å†…é€šçŸ¥
- é€šçŸ¥æ¨¡æ¿

**ä¾èµ–**: Merchant

### 21. Audit - å®¡è®¡æ—¥å¿— â­P1
**è·¯å¾„**: `internal/audit/`
**åŠŸèƒ½**:
- æ“ä½œå®¡è®¡
- å®¡è®¡æŸ¥è¯¢
- åˆè§„å®¡è®¡

**ä¾èµ–**: æ‰€æœ‰æ¨¡å—

### 22. Report - æŠ¥è¡¨ç³»ç»Ÿ â­P2
**è·¯å¾„**: `internal/report/`
**åŠŸèƒ½**:
- è‡ªå®šä¹‰æŠ¥è¡¨
- å®šæ—¶æŠ¥è¡¨
- æŠ¥è¡¨å¯¼å‡º

**ä¾èµ–**: Analytics, Transaction

### 23. Scheduler - ä»»åŠ¡è°ƒåº¦ â­P1
**è·¯å¾„**: `internal/scheduler/`
**åŠŸèƒ½**:
- å®šæ—¶ä»»åŠ¡
- ä»»åŠ¡ç¼–æ’
- ä»»åŠ¡ç›‘æ§

**ä¾èµ–**: å„ä¸šåŠ¡æ¨¡å—

### 24. I18n - å›½é™…åŒ– â­P2
**è·¯å¾„**: `internal/i18n/`
**åŠŸèƒ½**:
- å¤šè¯­è¨€æ”¯æŒ
- è´§å¸æ ¼å¼åŒ–
- æ—¶åŒºå¤„ç†

**ä¾èµ–**: æ— 

---

## å…­ã€æŠ€æœ¯åŸºç¡€è®¾æ–½åŸŸ (Infrastructure)

### 25. Gateway - API ç½‘å…³ â­P0
**è·¯å¾„**: `internal/interfaces/gateway/`, `cmd/gateway-api/`
**åŠŸèƒ½**:
- å•†æˆ· API ç½‘å…³
- è¯·æ±‚è·¯ç”±
- é™æµæ§åˆ¶
- API Key éªŒè¯

**ä¾èµ–**: å„ä¸šåŠ¡æ¨¡å—

### 26. Analytics - æ•°æ®åˆ†æ â­P1
**è·¯å¾„**: `internal/analytics/`
**åŠŸèƒ½**:
- äº¤æ˜“æ•°æ®åˆ†æ
- å•†æˆ·æ•°æ®åˆ†æ
- é«˜çº§åˆ†ææŠ¥è¡¨
- Analytics Writer Worker

**ä¾èµ–**: Transaction, ClickHouse (å¤–éƒ¨)

### 27. Monitor - ç›‘æ§å‘Šè­¦ â­P1
**è·¯å¾„**: `internal/monitor/`
**åŠŸèƒ½**:
- ç³»ç»Ÿç›‘æ§
- ä¸šåŠ¡ç›‘æ§
- å‘Šè­¦è§„åˆ™
- å¥åº·æ£€æŸ¥

**ä¾èµ–**: å„æ¨¡å—æš´éœ²çš„æŒ‡æ ‡

### 28. Outbox - æ¶ˆæ¯ä¸­ç»§ â­P1
**è·¯å¾„**: `internal/outbox/`, `cmd/outbox-relay/`
**åŠŸèƒ½**:
- Outbox æ¨¡å¼å®ç°
- æ¶ˆæ¯å¯é æŠ•é€’
- äº‹ä»¶å‘å¸ƒ

**ä¾èµ–**: PostgreSQL, Kafka (å¤–éƒ¨)

### 29. Temporal - å·¥ä½œæµå¼•æ“ â­P1
**è·¯å¾„**: `internal/temporal/`, `cmd/temporal-worker/`
**åŠŸèƒ½**:
- å¤æ‚ä¸šåŠ¡æµç¨‹ç¼–æ’
- Saga åˆ†å¸ƒå¼äº‹åŠ¡
- å®šæ—¶å·¥ä½œæµ
- Temporal Worker

**ä¾èµ–**: Temporal Server (å¤–éƒ¨)

### 30. Sandbox - æ²™ç®±ç¯å¢ƒ â­P2
**è·¯å¾„**: `internal/sandbox/`
**åŠŸèƒ½**:
- æµ‹è¯•ç¯å¢ƒæ¨¡æ‹Ÿ
- æ¨¡æ‹Ÿæ”¯ä»˜æ¸ é“
- æµ‹è¯•æ•°æ®ç”Ÿæˆ

**ä¾èµ–**: Channel

### 31. Agent - ä»£ç†ç³»ç»Ÿ â­P2
**è·¯å¾„**: `internal/agent/`, `cmd/agent-api/`
**åŠŸèƒ½**:
- ä»£ç†ç®¡ç†
- ä»£ç†ç”¨æˆ·ç®¡ç†
- ä»£ç†åˆ†æ¶¦

**ä¾èµ–**: Merchant, Transaction

---

## ä¸ƒã€Worker/å¼‚æ­¥å¤„ç†æœåŠ¡

### å¼‚æ­¥æœåŠ¡æ¸…å•

| Worker æœåŠ¡ | è·¯å¾„ | èŒè´£ | ä¼˜å…ˆçº§ |
|------------|------|------|--------|
| outbox-relay | `cmd/outbox-relay/` | æ¶ˆæ¯ä¸­ç»§æŠ•é€’ | P1 |
| temporal-worker | `cmd/temporal-worker/` | å·¥ä½œæµå¤„ç† | P1 |
| settlement-worker | `cmd/settlement-worker/` | ç»“ç®—å¤„ç† | P1 |
| recon-worker | `cmd/recon-worker/` | å¯¹è´¦å¤„ç† | P1 |
| payout-worker | `cmd/payout-worker/` | ä»£ä»˜å¤„ç† | P1 |
| webhook-worker | `cmd/merchant-webhook-worker/` | Webhook æ¨é€ | P1 |
| analytics-writer | `cmd/analytics-writer/` | åˆ†ææ•°æ®å†™å…¥ | P1 |
| async-export-worker | `cmd/async-export-worker/` | å¼‚æ­¥å¯¼å‡º | P2 |
| canary-worker | `cmd/canary-worker/` | é‡‘ä¸é›€æ£€æµ‹ | P2 |
| keycloak-sync-worker | `cmd/keycloak-sync-worker/` | ç”¨æˆ·åŒæ­¥ | P2 |
| workers | `cmd/workers/` | é€šç”¨ä»»åŠ¡é˜Ÿåˆ— | P1 |

---

## å…«ã€æ¨¡å—ä¾èµ–å…³ç³»å›¾

```
æ ¸å¿ƒä¾èµ–æµå‘ï¼š
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Channel   â”‚ â†â”€â”€ æ”¯ä»˜æ¸ é“ (Bradesco/Stripe/...)
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                  â”‚                  â”‚
        â–¼                  â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Payment    â”‚  â”‚ Transaction  â”‚  â”‚     Risk     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                 â”‚
       â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚    â”‚
       â–¼    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Merchant   â”‚â†â”€â”¤    Ledger    â”‚  â”‚  Settlement  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                 â”‚                  â”‚
       â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
       â”‚    â”‚                               â”‚
       â–¼    â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Tenant    â”‚                    â”‚    Recon     â”‚
â”‚  (RBAC/KYB)  â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¹ã€ä¸Šçº¿æ¨¡å—ä¼˜å…ˆçº§

### P0 - æ ¸å¿ƒé˜»å¡ (å¿…é¡»å®Œæˆ)
| æ¨¡å— | è¯´æ˜ |
|------|------|
| Transaction | äº¤æ˜“æ ¸å¿ƒï¼Œç³»ç»Ÿå­˜åœ¨çš„åŸºç¡€ |
| Payment | æ”¯ä»˜å¤„ç†æ ¸å¿ƒ |
| Channel | æ”¯ä»˜æ¸ é“ä¸è·¯ç”± |
| Merchant | å•†æˆ·ç®¡ç† |
| Ledger | è´¦åŠ¡è®°è´¦ |
| Risk | é£é™©ç®¡æ§ |
| Admin | åå°ç®¡ç† |
| Gateway | API ç½‘å…³ |

### P1 - ä¸Šçº¿å¿…å¤‡ (å¿…é¡»å®Œæˆ)
| æ¨¡å— | è¯´æ˜ |
|------|------|
| Checkout | æ”¶é“¶å° |
| RBAC | æƒé™ä½“ç³» |
| Tenant | å¤šç§Ÿæˆ·/è®¤è¯ |
| Settlement | ç»“ç®— |
| Recon | å¯¹è´¦ |
| Ops | è¿è¥æ“ä½œ/é€€æ¬¾ |
| Webhook | å›è°ƒé€šçŸ¥ |
| KYB | å•†æˆ·è®¤è¯ |
| Treasury | è´¢èµ„ç®¡ç† |
| Audit | å®¡è®¡æ—¥å¿— |
| Analytics | æ•°æ®åˆ†æ |
| All Workers | æ‰€æœ‰å¼‚æ­¥æœåŠ¡ |

### P2 - å¢å¼ºåŠŸèƒ½ (å¯è¿­ä»£)
| æ¨¡å— | è¯´æ˜ |
|------|------|
| AML | åæ´—é’± |
| Compliance | åˆè§„ç®¡ç† |
| Report | è‡ªå®šä¹‰æŠ¥è¡¨ |
| Notification | æ¶ˆæ¯é€šçŸ¥ |
| Telegram | Telegram æœºå™¨äºº |
| Email | é‚®ä»¶æœåŠ¡ |
| I18n | å›½é™…åŒ– |
| Sandbox | æ²™ç®±ç¯å¢ƒ |
| Agent | ä»£ç†ç³»ç»Ÿ |
| Monitor | ç›‘æ§å‘Šè­¦ |

---

## åã€æ•°æ®æ¨¡å‹æ¦‚è¦

```
æ ¸å¿ƒå®ä½“å…³ç³»ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Merchant  â”‚â”€â”€â”€â”€â–¶â”‚  Account   â”‚â—€â”€â”€â”€â”€â”‚   Ledger   â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â””â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚Transaction â”‚
                â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚             â”‚             â”‚
        â–¼             â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Payment  â”‚  â”‚   Refund   â”‚  â”‚Settlement  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

---

*æ­¤æ–‡æ¡£ç”± Arch åˆ†æç”Ÿæˆï¼Œä¾› Atath åˆ¶å®šé‡Œç¨‹ç¢‘è§„åˆ’ä½¿ç”¨ã€‚*
